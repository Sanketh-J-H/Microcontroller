#include "Timer2_PulseWidthModulation.h"
#include <stdint.h>

int main()
{
	RCC->AHB1ENR |=  4;                 /* enable GPIOC clock */
	RCC->AHB1ENR |=  1;                /* enable GPIOA clock */

    GPIOA->MODER &= ~0x00000C00;        /* clear pin mode */
	GPIOA->MODER |=  0x00000400;        /* set pin to output mode */

	GPIOC->MODER &= ~0x0C000000;        /* clear pin mode to input mode */

	tim2_pa5_output_PWM();

	while(1)
	{
	    if (GPIOC->IDR & 0x2000)  // if PC13 is high (button pressed)
	    {
	    	TIM2->CCMR1 ^= (1<<4); // clear bit 4
	    	GPIOC->IDR &= ~0x2000;
	    }

	}


}
